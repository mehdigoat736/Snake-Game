<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>mehdi.co // Pro Edition</title>
    
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    
    <style>
        :root {
            /* --- NEW PRO THEME COLORS --- */
            --apple-blue: #007AFF;
            --apple-purple: #5856D6;
            --apple-bg: #F2F2F7;
            --glass-border: rgba(255, 255, 255, 0.5);
            --text-dark: #1D1D1F;
            --text-secondary: #86868B;
            --input-bg: rgba(118, 118, 128, 0.12);

            /* KEEPING OLD VARIABLES FOR MAIN APP COMPATIBILITY */
            --primary: #3b82f6;
            --primary-light: #eff6ff;
            --text-main: #0f172a;
            --text-muted: #64748b;
            --bg-gradient: linear-gradient(135deg, #f0f4ff 0%, #f8fafc 100%);
            --glass-surface: rgba(255, 255, 255, 0.8);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; user-select: none; }
        
        body {
            margin: 0; font-family: 'Inter', sans-serif;
            background: var(--apple-bg);
            height: 100vh; overflow: hidden;
        }

        /* =========================================
           NEW PROFESSIONAL INTRO SCREEN
        ========================================= */
        #pro-intro-screen {
            position: fixed; inset: 0; z-index: 50000;
            background: var(--apple-bg);
            display: flex; align-items: center; justify-content: center;
            overflow: hidden;
        }

        /* Animated Background Orbs */
        .bg-orb {
            position: absolute; border-radius: 50%; filter: blur(80px); opacity: 0.4; z-index: -1;
            animation: orbFloat 10s infinite ease-in-out alternate;
        }
        .orb-1 { top: -10%; left: -10%; width: 50vh; height: 50vh; background: var(--apple-blue); }
        .orb-2 { bottom: -10%; right: -10%; width: 60vh; height: 60vh; background: var(--apple-purple); animation-delay: -5s; }

        @keyframes orbFloat { from { transform: translate(0, 0) scale(1); } to { transform: translate(30px, 50px) scale(1.1); } }

        /* The Glass Card Container */
        .intro-glass-card {
            background: rgba(255, 255, 255, 0.65);
            backdrop-filter: blur(25px) saturate(180%); /* The "Apple Glass" effect */
            -webkit-backdrop-filter: blur(25px) saturate(180%);
            border: 1px solid var(--glass-border);
            border-radius: 32px;
            padding: 60px 40px;
            width: 90%; max-width: 480px;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0,0,0,0.08), 0 0 0 1px rgba(255,255,255,0.4) inset;
            
            opacity: 0; transform: translateY(30px) scale(0.95);
            animation: cardEntrance 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards 0.3s;
        }

        @keyframes cardEntrance { to { opacity: 1; transform: translateY(0) scale(1); } }

        /* Typography & Brand */
        .brand-gradient {
            font-weight: 900; font-size: 2.5rem; margin: 0 0 10px 0; letter-spacing: -1px;
            background: linear-gradient(135deg, var(--apple-blue), var(--apple-purple));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        .intro-subtitle { font-size: 1.1rem; color: var(--text-secondary); margin-bottom: 40px; font-weight: 500; }

        /* Avatar Section */
        .pro-avatar-wrapper {
            width: 110px; height: 110px; margin: 0 auto 30px auto; position: relative; cursor: pointer;
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .pro-avatar-wrapper:hover { transform: scale(1.05); }
        .pro-avatar { 
            width: 100%; height: 100%; border-radius: 50%; object-fit: cover; 
            box-shadow: 0 10px 25px rgba(0,0,0,0.1); border: 4px solid white; 
        }
        .pro-camera-badge {
            position: absolute; bottom: 0; right: 0; width: 36px; height: 36px;
            background: var(--apple-blue); color: white; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            border: 3px solid white; font-size: 1.1rem; box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        /* Sharp Inputs & Buttons */
        .input-group-pro { margin-bottom: 25px; text-align: left; }
        .label-pro { display: block; font-size: 0.85rem; font-weight: 600; color: var(--text-dark); margin-bottom: 8px; padding-left: 4px; }
        .input-pro {
            width: 100%; padding: 18px 20px; border-radius: 16px; border: none;
            font-size: 1.05rem; color: var(--text-dark); outline: none;
            background: var(--input-bg); font-weight: 500;
            transition: all 0.2s ease;
            box-shadow: inset 0 0 0 1px rgba(0,0,0,0.05);
        }
        .input-pro:focus { background: white; box-shadow: inset 0 0 0 2px var(--apple-blue); }
        .input-pro::placeholder { color: #A1A1A6; }

        .btn-pro {
            width: 100%; padding: 18px; border: none; border-radius: 16px;
            background: linear-gradient(135deg, var(--apple-blue), var(--apple-purple));
            color: white; font-weight: 700; font-size: 1.1rem; cursor: pointer;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 10px 20px -10px rgba(0, 122, 255, 0.5);
        }
        .btn-pro:hover { transform: translateY(-2px); box-shadow: 0 15px 30px -10px rgba(0, 122, 255, 0.6); }
        .btn-pro:active { transform: scale(0.98); }

        /* Exit Animation Class */
        .fade-out-zoom {
            animation: fadeOutZoom 0.8s cubic-bezier(0.7, 0, 0.3, 1) forwards;
        }
        @keyframes fadeOutZoom {
            to { opacity: 0; transform: scale(1.1); filter: blur(10px); }
        }

        /* =========================================
           OLD STYLES (Kept for the main app to work)
        ========================================= */
        #setup-screen, #intro-screen { display: none; } /* Hide old intros */
        .app-shell { display: flex; height: 100%; width: 100%; position:relative; z-index:1; opacity: 0; transition: opacity 0.8s ease-out; transform: scale(0.98); }
        .app-shell.visible { opacity: 1; transform: scale(1); }

        /* (Rest of your existing app styles - Simplified for brevity in this view) */
        .sidebar { width: 280px; background: rgba(255,255,255,0.8); backdrop-filter: blur(25px); border-right: 1px solid rgba(255,255,255,0.6); padding: 40px 25px; display: flex; flex-direction: column; gap: 8px; z-index: 10; }
        .logo-area { font-size: 1.8rem; font-weight: 800; color: var(--text-main); margin-bottom: 50px; padding-left: 10px; }
        .logo-area span { color: var(--primary); }
        .nav-btn { background: transparent; border: none; color: var(--text-muted); padding: 16px 20px; border-radius: 16px; cursor: pointer; text-align: left; font-size: 0.95rem; font-weight: 600; display: flex; align-items: center; gap: 15px; }
        .nav-btn.active { background: var(--text-main); color: white; }
        .main-view { flex: 1; overflow-y: auto; padding: 50px 60px; position: relative; background: var(--bg-gradient); }
        .section { display: none; } .section.active { display: block; }
        .greeting { font-size: 3rem; font-weight: 800; color: var(--text-main); margin: 0; letter-spacing: -1.5px; }
        .grid-layout { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 30px; }
        .glass-card { background: var(--glass-surface); border: 1px solid rgba(255,255,255,0.6); border-radius: 28px; padding: 30px; box-shadow: 0 20px 40px -10px rgba(59, 130, 246, 0.1); backdrop-filter: blur(20px); }
        .mobile-nav { display: none; }
        @media (max-width: 768px) { .sidebar { display: none; } .mobile-nav { display: flex; position: fixed; bottom: 0; width: 100%; background: white; justify-content: space-around; padding: 15px; z-index: 100; } .main-view { padding: 30px 20px; } .intro-glass-card { padding: 40px 25px; } }

    </style>
</head>
<body>

    <div id="pro-intro-screen">
        <div class="bg-orb orb-1"></div>
        <div class="bg-orb orb-2"></div>
        
        <div class="intro-glass-card">
            <h1 class="brand-gradient">mehdi.co</h1>
            <p class="intro-subtitle">Din profesjonelle studiepartner.</p>
            
            <div class="pro-avatar-wrapper" onclick="document.getElementById('proAvatarUpload').click()">
                <img id="proAvPreview" class="pro-avatar" src="https://api.dicebear.com/7.x/notionists/svg?seed=student">
                <div class="pro-camera-badge"><i class="ph ph-camera"></i></div>
            </div>
            <input type="file" id="proAvatarUpload" accept="image/*" style="display: none;">
            
            <div class="input-group-pro">
                <label for="setupNamePro" class="label-pro">Hva skal vi kalle deg?</label>
                <input type="text" id="setupNamePro" class="input-pro" placeholder="Ditt navn" autocomplete="off">
            </div>
            
            <button class="btn-pro" onclick="finalizeProLogin()">Kom i gang</button>
        </div>
    </div>
    <div id="intro-screen"></div> <div id="setup-screen"></div>

    <div class="app-shell" id="app-shell">
        <aside class="sidebar">
            <div class="logo-area">mehdi<span>.co</span></div>
            <button class="nav-btn active"><i class="ph ph-squares-four"></i> Oversikt</button>
            <button class="nav-btn"><i class="ph ph-calendar"></i> Timeplan</button>
            <button class="nav-btn"><i class="ph ph-calculator"></i> Verktøy</button>
            <button class="nav-btn"><i class="ph ph-check-square"></i> Oppgaver</button>
            <button class="nav-btn"><i class="ph ph-game-controller"></i> Spill</button>
            <button class="nav-btn"><i class="ph ph-gear"></i> Innstillinger</button>
        </aside>

        <main class="main-view">
            <section id="dashboard" class="section active">
                <div class="page-header">
                    <div>
                        <h1 class="greeting" id="greet">Hei</h1>
                        <p class="subtitle" id="dateSub" style="color:var(--text-muted);">Velkommen tilbake.</p>
                    </div>
                </div>
                <div class="grid-layout" style="margin-top: 40px;">
                    <div class="glass-card">
                        <h2>Klar for dagen?</h2>
                        <p style="color:var(--text-muted);">Dine verktøy er klare.</p>
                    </div>
                </div>
            </section>
        </main>
        <nav class="mobile-nav"> <button style="border:none;background:none;font-size:1.5rem;color:var(--primary);"><i class="ph ph-squares-four"></i></button>
             <button style="border:none;background:none;font-size:1.5rem;color:#ccc;"><i class="ph ph-calendar"></i></button>
        </nav>
    </div>


<script>
    // --- NEW PRO INTRO LOGIC ---

    // Handle Avatar Upload in new intro
    document.getElementById('proAvatarUpload').addEventListener('change', function(e) {
        if(e.target.files[0]) {
            const r = new FileReader();
            r.onload = (evt) => { 
                state.avatar = evt.target.result; 
                document.getElementById('proAvPreview').src = state.avatar;
            };
            r.readAsDataURL(e.target.files[0]);
        }
    });

    // Transition sequence
    function finalizeProLogin() {
        const nameInput = document.getElementById('setupNamePro').value;
        if(nameInput) state.name = nameInput;
        
        // Save data
        save(); 
        updateGlobalUI(); // Update the main app behind the scenes

        // 1. Trigger exit animation on intro
        const introScreen = document.getElementById('pro-intro-screen');
        introScreen.classList.add('fade-out-zoom');

        // 2. Wait for animation, then hide intro and reveal app
        setTimeout(() => {
            introScreen.style.display = 'none';
            document.getElementById('app-shell').classList.add('visible');
        }, 8000); // Matches animation duration (0.8s)
    }


    // --- EXISTING APP LOGIC (Simplified for context) ---
    let state = { name: "Student", avatar: "https://api.dicebear.com/7.x/notionists/svg?seed=student" };
    if(localStorage.getItem('UltOS')) { state = JSON.parse(localStorage.getItem('UltOS')); }

    function save() { localStorage.setItem('UltOS', JSON.stringify(state)); }

    function updateGlobalUI() {
        const hr = new Date().getHours();
        let gt = hr < 12 ? "God morgen" : hr < 18 ? "God ettermiddag" : "God kveld";
        document.getElementById('greet').innerText = `${gt}, ${state.name}`;
        
        // If user already has data, pre-fill the new intro
        if(state.name !== "Student") document.getElementById('setupNamePro').value = state.name;
        document.getElementById('proAvPreview').src = state.avatar;
    }

    // Initialize
    window.onload = function() {
        updateGlobalUI();
    };
</script>
</body>
</html>
